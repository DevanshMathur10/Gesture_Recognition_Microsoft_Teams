import numpy as np
import copy
import itertools

def extract_keypoint_history(landmark_list,base_landmark_list=None):
    temp_landmark_list = copy.deepcopy(landmark_list)

    for index,landmark_point in enumerate(temp_landmark_list):
        temp_landmark_list[index][0]-=base_landmark_list[index][0]
        temp_landmark_list[index][1]-=base_landmark_list[index][1]

    # Convert to a one-dimensional list
    temp_landmark_list = list(itertools.chain.from_iterable(temp_landmark_list))

    return temp_landmark_list

l1=[[191, 439], [254, 418], [310, 370], [339, 318], [369, 284], [282, 284], [313, 222], [329, 182], [341, 148], [245, 270], [264, 197], [272, 150], [277, 111], [208, 272], [217, 203], [222, 160], [227, 125], [169, 288], [155, 241], [147, 206], [142, 175]]
# [[191, 439], [254, 418], [310, 370], [339, 318], [369, 284], [282, 284], [313, 222], [329, 182], [341, 148], [245, 270], [264, 197], [272, 150], [277, 111], [208, 272], [217, 203], [222, 160], [227, 125], [169, 288], [155, 241], [147, 206], [142, 175]]
# [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
l2=[[222, 426], [281, 400], [336, 349], [369, 302], [398, 269], [308, 271], [335, 209], [350, 171], [362, 139], [270, 258], [289, 185], [300, 138], [309, 100], [231, 260], [239, 191], [243, 150], [249, 116], [192, 276], [179, 226], [169, 193], [161, 162]]
# [31, -13, 27, -18, 26, -21, 30, -16, 29, -15, 26, -13, 22, -13, 21, -11, 21, -9, 25, -12, 25, -12, 28, -12, 32, -11, 23, -12, 22, -12, 21, -10, 22, -9, 23, -12, 24, -15, 22, -13, 19, -13]
l3=[[219, 424], [281, 399], [337, 349], [369, 302], [397, 269], [310, 272], [340, 211], [355, 171], [366, 139], [271, 257], [291, 185], [301, 140], [308, 105], [232, 258], [241, 188], [245, 147], [249, 114], [191, 274], [179, 226], [169, 193], [161, 163]]
# [28, -15, 27, -19, 27, -21, 30, -16, 28, -15, 28, -12, 27, -11, 26, -11, 25, -9, 26, -13, 27, -12, 29, -10, 31, -6, 24, -14, 24, -15, 23, -13, 22, -11, 22, -14, 24, -15, 22, -13, 19, -12]
l4=[[250, 415], [313, 386], [363, 336], [393, 291], [422, 262], [342, 260], [367, 195], [382, 157], [392, 127], [303, 249], [317, 176], [326, 131], [332, 94], [263, 251], [268, 185], [271, 141], [274, 106], [223, 267], [210, 218], [200, 185], [191, 155]]
# [59, -24, 59, -32, 53, -34, 54, -27, 53, -22, 60, -24, 54, -27, 53, -25, 51, -21, 58, -21, 53, -21, 54, -19, 55, -17, 55, -21, 51, -18, 49, -19, 47, -19, 54, -21, 55, -23, 53, -21, 49, -20]

print(extract_keypoint_history(l1,l1))
print(extract_keypoint_history(l2,l1))
print(extract_keypoint_history(l3,l1))
print(extract_keypoint_history(l4,l1))